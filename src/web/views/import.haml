.pt-2#win_import{"data-role"=>"window",
"data-width"=>"100%",
"data-height"=>"100%",
"data-place"=>"center",
"data-draggable"=>"true",
"data-btn-min"=>"false",
"data-btn-max"=>"false",
"data-resizable"=>"false",
"data-title"=>"导入项目",
"data-close-action"=>"Metro.actions.HIDE",
"data-cls-caption"=>"kcoin-win-title",
"data-cls-master"=>"px-3",
"data-cls-window"=>"no-visible kcoin-win",
"data-on-close-click"=>"closeWin"}

  #kcoin_stepper{"data-role"=>"stepper",
  "data-steps"=>"3",
  "data-cls-step"=>"kcoin-step",
  "data-cls-stepper"=>"kcoin-stepper",
  "data-cls-complete"=>"kcoin-stepper-complete",
  "data-cls-current"=>"kcoin-stepper-complete",
  "data-view"=>"cycle"}
  %form.kcoin-win-panel#import_form{:onsubmit=>"return false;",
  :enctype=>"multipart/form-data"}
    #kcoin_master{"data-role"=>"master",
    "data-effect"=>"fade",
    "data-cls-controls"=>"d-none",
    "data-cls-pages"=>"border-none",
    "data-cls-control-title"=>"d-none"}
      .page
        .row.mx-0
          .cell-12.form-group.px-0
            .kcoin-win-panel#projectList{"data-role"=>"panel",
            "data-width"=>"100%",
            "data-height"=>"100%",
            "data-cls-content"=>"px-5",
            "data-cls-panel"=>"border-none"}
            %template#projectListTemplate
              <% for(let item of data.values()){ %>
              %p.my-5
                %img.kcoin-img-org{src: "<%item[0].owner.avatar_url%>"}
                %label <%item[0].owner.login%>
                %label.fg-gray（<%item.length%> 个项目）
              %ul.mx-0.my-0
                <% for(var i = 0; i < item.length; i++) { %>
                %li.kcoin-li.d-flex.flex-align-center{name: "github_project_id",
                onclick: "showNextPage(<%list[i].id%>)",
                :value=>"<%list[i].id%>"} <%list[i].name%>
                <% } %>
              <% } %>
      .page
        .row.mx-0
          .cell-12.form-group.px-0
            .import_title
              %img.pos-absolute.pos-left-center.ml-5{:src=>"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABTRJREFUSA3FV0tsVWUQnvnP87ZgW0tcVMFXjGlEYUGswSi5BcRWXRkaoILRyitRTEzYSIAGgiQsQI0JKiFE6MNIYGEoiIVeysKIcYHGhASCiQ8gMZDyaO95n3HmwGlPT4q8VP7FPTP/P/N9/3NmLsJNtq96a6pCy5kKhC8SYTPE8aOJq1KnEWk/IH2je4XjLbMHLt0MJN7IqOtQ5VNoxG1s9zIRPGKYwJys0TVPRlAKIPABEOFX7t1Hgdq+YNbQz9csxvxcl3jnwXH3aVa0SiG0mRZUircQ+h64LJ5n5msrwyrWJ7CNLROQxjZDMcH2yNM2LJoz+NfV3tG/YxJ3lArP6Dpt0w2cLCvzPAiA6BAo2KPF+rFLofGHFwzIBMAyauwqPZgYQdjA6qu87FmWBQYwchjQL2GIi18rOt+PpuXdyXd8ebjyBTLiLl2HWuIVhhEdRMB182c43+Vtx9K7+wvTCWiNruEc5B0IQ7iAgVowb+bQt1n7UcTdfYUG0KFHSKOQOWNaW0fupmIRwqzTjeRSCfRzaK9UCtdpOuhCzggvzW90jqW+w8RdpfETAKOjhkn1UQRBFNLy1qK7PTW8nW9nyW7TdNyqaWAEPp4A0p5fULzC94MvZApIFK62bKqX7Y0Car9TUsEVjICxBDPBZo6ULyHu6DWfVBq8xc8F2LC3Dt1NqcGdfk8zlmAKtnAIl2AmxMrQFvNzqAh98Ahwza2eaTq5z34EgwmGj0/62/l+KMLVgi0cwiX9uKNUXW2Cd9wuwIOugwdai+VmGbid1lGq2KoU3RuE8N7rM50zWQwe218oUJPrwG8+WFN1i9wpqOEkCQ6I8e6s8a3InX32Ik2jZQUONUOX6TL7JitLMRTi7jimJg4yk6zIncK7gE06P3cOeQ6Hph9Sw1v5fsFhVWlqMz8dGBqEc2EYb8776yo4JhzCJZyKT6QpjpLQe+FK5P+Zd9jZO66+o78yuRD5MdE79sM9hkaf6wbVMk5IUfT2otn+ibztgFd5hs//QhLnmVNBTFezDNGlmjpedaZ1lyqmGWbUo0Hc09VnPpEZGhHtwkbTpga5UUEQb2lt9PeODI5INXUDjM3xXZILcw6/4xGTESkmmm6a8DBvz0Sla3s6+63HRkYBOg/bCzlbLZM+TgxHTNtbmx3/J1mBwtOJAWLVwFkoZI1PHXU+8RzcKG+Qz+9xPpy9O0r2Q2LT0c9v38DNfFmU78M5UvGSlumjdyyLNXC2hrE5k8nWMKfipR/ghy167XjNfCBr3N4O8fxieVXgwRbZItPEySbg7l19xhSMta2GDhPkXDnEvtM6wzuV9c3LNdbQ/Zyva5PUKZxIdCDkpMdbVuCM/nTegY3JOO+s9H36VI6HVz5NoX6EM8+zood+/OHCRmdP3i+vh7HRIBzCJZzKQ/snvmm/y0yI1Ny8g+gtLRANnnRXcKDfwZlLKo5qw5Bzpf7B8s2dK9+XucIhXMKp3ihevMir+loINEWNUgSInG9Ll0JQXS4v50vUbfFpBQGc1XRasvQVKOdt87qkW52xpV+4hDO51XEQbWPAsm6CxTu7TvJp3ln05mYuRsh503VpYRCopnnPeSfHssv2tTNWjLResIVDuGR8OKB39hU+sitgBRcAXLjRqtZG94MswO3Ku/rs9y0TN0hUc8vwcWuj865gJSsWAVFf77l4QsoVzcB2SeLSfydtJ2MYjCWYCTZzpHjDK5aOu1L6pDO5K8VeSn7d8ha4vIX/qLxNye9KQZ+Sy/d//wuTJRf53/7T9jfsGK6Qj03SVQAAAABJRU5ErkJggg=="}
              %span#project_title.pos-absolute.pos-left-center.ml-15
          .cell-12.form-group.px-5
            %label 1. 填写项目名称
            %input.project_name{:type=>"text",
            :name=>"custom_name",
            maxlength: 120,
            "data-validate" => "required"}
            %span.invalid_feedback
              项目名称不能为空
            %input#github_project_id{:type=>"hidden",:name=>"github_project_id"}
            %input.project_name{:type=>"hidden",:name=>"name"}
          .cell-12.form-group.px-5
            %label
              2. 选择项目决策方式
            .user-kcoin-detail-link.d-inline-block
              %a{:href=>"/project/history?uId="} 查看更多 >
            %select#decision_method{"data-role"=>"select",
            :name=>"discuss_method",
            "data-cls-select"=>"input",
            "data-filter"=>"false"}
              %option{:name=>"decision_method",:value=>"0"}
                独裁制
              %option{:name=>"decision_method",:value=>"1"}
                委员会单票制
              %option{:name=>"decision_method",:value=>"2"}
                委员会占比制
              %option{:name=>"decision_method",:value=>"3"}
                全体单票制
              %option{:name=>"decision_method",:value=>"4"}
                全体占比制
          .cell-12.form-group.px-5
            %label 3. 定义项目 token 名称和初始总额（示例：共享币）
            .row.mx-0
              .cell-6.px-0
                %input#token_name{:type=>"text",
                :name=>"token_name",
                maxlength: 120,
                :placeholder => "请填写 token 名称",
                "data-validate" => "required"}
                %span.invalid_feedback
                  token 名称不能为空
              .cell-6.pl-2.pr-0
                %input#init_supply{:type=>"text",
                :name=>"init_supply",
                maxlength: 120,
                :placeholder => "请填写初始总额",
                "data-validate" => "required pattern=^(?:[1-9]\\d*|0)?(?:\\.\\d+)?$"}
                %span.invalid_feedback
                  初始总额不能为空，切必须为数字
          .cell-12.form-group.px-5
            %label 4. 上传项目封面（选填，但只能添加不大于 2M 的图片）
            %input#img{:type=>"file",
            "data-role"=>"file",
            :name=>"images",
            "data-caption"=>"选择文件",
            "dir"=>"rtl",
            "data-validate"=>"custom=validateFileSize"}
        .row.mx-0
          .cell-12.text-center.px-0.pos-fixed.pos-bottom-center.mb-5
            %button.btn_prev.button.info.outline.mr-0-fs.mr-5-md.kcoin-button-normal 上一步
            %button.btn_next.button.info.ml-0-fs.ml-5-md.kcoin-button-normal 下一步
      .page
        .row.mx-0
          .cell-12.form-group.px-0
            %div.ml-5
              %span 给所有成员分配初始
              %span.tokenName
              %span 值，当前剩余
              %span#tokenNum
              %span.tokenName
            .kcoin-win-member-panel{"data-role"=>"panel",
            "data-width"=>"100%",
            "data-height"=>"100%",
            "data-cls-content"=>"px-5",
            "data-cls-panel"=>"border-none"}
              .row#memberList
              %template#memberListTemplate
                <% for(let item of data.values()){ %>
                %li.py-5.cell-6.px-0
                  .row.mx-5
                    .member-img.stub.px-0{:style=>"width:81px"}
                      %img{:src=>"<%item.avatar_url%>"}
                    .member-msg.cell.px-0
                      .cell-12
                        %span
                          <%item.login%>
                      .cell-12
                        %input{:type=>"text",
                        :name=>"member_token",
                        maxlength: 120,
                        "data-member-id"=>"<%item.id%>",
                        :placeholder => "请填写初始 token 值"}
                        %span.invalid_feedback
                          token 值不能为空
                <% } %>
        .row.mx-0
          .cell-12.text-center.px-0.pos-fixed.pos-bottom-center.mb-5
            %button.btn_prev.button.info.outline.mr-0-fs.mr-5-md.kcoin-button-normal 上一步
            %button#btn_submit.button.info.ml-0-fs.ml-5-md.kcoin-button-normal 导入

= include_javascript 'project_list_none'
